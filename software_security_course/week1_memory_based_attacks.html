<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <link href="style.css" rel="stylesheet" type="text/css">
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>memory_based_attacks</title>
  </head>
  <body>
    <h1>Week 1: Memory-based attacks</h1>
    We will begin our discussion of software security by understanding
    one of the oldest and pernicious attacks against software: the
    buffer overflow. We will see how buffer overflows are one kind of
    memory-based attack that low-level software (written in C and/or
    C++, primarily) is susceptible to, and we will consider other
    memory-based attacks as well. Your project for this week will be to
    construct a simple exploit of a buffer overflow, to see how it
    works.<br>
    <br>
    If you have not done so, please watch the <a moz-do-not-send="true"
      href="assets/Intro_part_1.mp4">preparatory material from Week 0</a>.<br>
    <h2>Learning Objectives</h2>
    <ul>
      <li>After the completion of this week's material (including the
        project, due at the end of next week), you will be able to:</li>
      <li>Understand the standard memory layout of running processes on
        the Intel x86 architecture</li>
      <li>Identify buffer overflows and related memory-based
        vulnerabilities in C programs, such as those based on format
        strings</li>
      <li>Construct a simple exploit of a buffer overflow</li>
      <li>Understand how exploits can inject remote code, and perform
        other security compromises</li>
    </ul>
    <h2>Video Lectures</h2>
    <ul>
      <li><a moz-do-not-send="true" href="assets/Low-Level_Security.mp4">Low-Level


          Security: Introduction</a> (7:35)</li>
      <li><a moz-do-not-send="true" href="assets/Memory_Layout.mp4">Memory


          Layout</a> (11:16)</li>
      <li><a moz-do-not-send="true" href="https://youtu.be/x8thu1AOsX8">Buffer


          Overflow</a> (6:23)</li>
      <li><a moz-do-not-send="true" href="https://youtu.be/nNBKed5C3AM">Code


          Injection</a> (6:15)</li>
      <li><a moz-do-not-send="true"
          href="assets/Other_Memory_Exploits.mp4">Other Memory Exploits</a>
        (11:52)</li>
      <li><a moz-do-not-send="true"
          href="assets/Format_String_Vulnerabilities.mp4">Format String
          Vulnerabilities</a> (6:43)</li>
    </ul>
    <h2>Readings</h2>
    <h3>Required reading</h3>
    The required reading this week is the following:<br>
    <ul>
      <li><a moz-do-not-send="true"
href="https://security.web.cern.ch/security/recommendations/en/codetools/c.shtml">Common


          vulnerabilities guide for C programmers</a>. Take note of the
        unsafe C library functions listed here, and how they are the
        source of buffer overflow vulnerabilities. This list will be
        relevant for the project and this week's quiz.</li>
      <li>(Reference) <a moz-do-not-send="true"
          href="http://www.geeksforgeeks.org/memory-layout-of-c-program/">Memory


          layout</a>. Explains a C program's memory layout, replicating
        the discussion in the second lecture.</li>
    </ul>
    <h3>Supplemental readings</h3>
    The following readings are optional: They are meant to supplement
    the material you are getting in the videos. Check them out if you
    are interested in learning more, or if you just want to see it all
    explained in a different way.<br>
    <ul>
      <li><a moz-do-not-send="true"
href="http://arstechnica.com/security/2015/08/how-security-flaws-work-the-buffer-overflow/">How


          buffer overflows work</a>. This article does a great job of
        walking you through how stack smashing works, and also talks
        about some defenses against it, which are covered in more depth
        in next week's materials.</li>
      <li>(Reference/refresher) <a moz-do-not-send="true"
          href="https://pacman128.github.io/pcasm/">PC Assembly Language</a>,
        by Paul Carter. This free book introduces x86 assembly, and
        should complement ideas seen in the lectures.</li>
      <li><a moz-do-not-send="true"
          href="http://insecure.org/stf/smashstack.html">Smashing the
          Stack for Fun and Profit</a> - original article on the topic
        by Aleph One, in 1996</li>
      <li><a moz-do-not-send="true"
          href="https://cs155.stanford.edu/papers/formatstring-1.2.pdf">Exploiting


          Format String Vulnerabilities</a> - report describing these
        format string attacks when they were first recognized; <a
          moz-do-not-send="true"
href="https://medium.com/swlh/binary-exploitation-format-string-vulnerabilities-70edd501c5be">more


          recent articles</a> present alternative descriptions</li>
      <li><a moz-do-not-send="true"
          href="http://phrack.org/issues/60/10.html">Basic Integer
          Overflows</a> - discussion of how overflowing integers can be
        a vector of attack</li>
    </ul>
    <h2>Project</h2>
    The <a moz-do-not-send="true" href="project1_buffer_overflow.html">first

      project</a> is on exploiting buffer overflows; it is due in three
    weeks, just prior to the start of week 4. You will complete the work
    for the project on your own computer, and then take the <a
      moz-do-not-send="true" href="assets/week1_BOF_quiz.docx">on-line
      assessment</a> to show that you've done so.<br>
    <h2>Quiz</h2>
    The <a moz-do-not-send="true" href="assets/week1_quiz.docx">quiz
      for this week</a> covers all of the material for this week, and
    the introductory material from last week, so do not forget to view
    that too.<br>
    <h2>Notes (made in 2020) on Course Content<br>
    </h2>
    <h3>Buffer Overflows and Other Violations of Memory Safety</h3>
    Unfortunately, despite it now being 5 years since these lectures
    were recorded, <b>buffer overflow-style vulnerabilities are still a
      real problem</b>. In the slides we showed a graph from the
    national vulnerability database (NVD) that ended in 2014; the NVD
    site allows you to <a moz-do-not-send="true"
href="https://nvd.nist.gov/vuln/search/statistics?form_type=Advanced&amp;results_type=statistics&amp;search_type=all&amp;cwe_id=CWE-119">graph

      the prevalence of CWE 119 (the one for buffer overflows)</a> to
    the present day. We can see that the percentage and total of these
    vulnerabilities declined in 2019 and 2020, but they are still
    relatively frequent. And, they are quite dangerous, due to the
    potential for an attacker to remotely inject code. They can still
    appear in commonly-used applications, too; e.g., <a
      moz-do-not-send="true"
      href="https://nvd.nist.gov/vuln/detail/CVE-2020-1594">CVE-2020-1594</a>
    considers a&nbsp; dangerous buffer overflow vulnerability in
    Microsoft Excel.<br>
    <br>
    The lectures and the project consider a 32-bit Intel architecture.
    Today, <b>64-bit architectures</b> are essentially universal, but
    the principles and problems still apply. For example, <a
      moz-do-not-send="true"
      href="https://thesquareplanet.com/blog/smashing-the-stack-21st-century/"><b>stack

        smashing is still possible</b></a>. That said, some defenses
    should be more effective on 64-bit machines than they were on 32-bit
    ones (see next week's lecture). <br>
    <br>
    Format string attacks are about as common now as they were in 2015,
    while <b>use-after-free (UAF) vulnerabilities are ticking up</b>,
    which we can see from the <br>
    <a moz-do-not-send="true"
href="https://nvd.nist.gov/vuln/search/statistics?form_type=Advanced&amp;results_type=statistics&amp;search_type=all&amp;cwe_id=CWE-416">NVD

      graph of CWE 416</a>, which is just one CWE type of temporal
    safety-violating exploit. We mentioned UAF vulnerabilities briefly,
    but did not discuss how they are exploited. Using a type-safe (or
    memory-safe) language prevents them.<br>
    <br>
    Why are these vulnerabilities still common? Because the <b>C and
      C++ programming languages are still popular</b>. The <a
      moz-do-not-send="true"
href="https://spectrum.ieee.org/at-work/tech-careers/top-programming-language-2020">IEEE

      Spectrum ranking places them at #3 and #4</a><br>
    &nbsp;on its top-50 languages list. As cyber-physical systems have
    become more prevalent (as have "Internet of Things" or IOT apps),
    more legacy C/C++ code is being network connected, creating more
    memory-unsafe attack surface. <br>
    <h3>Big news: Spectre and Meltdown!</h3>
    In January 2018, the world was shocked by the revelation of the <a
      moz-do-not-send="true" href="https://spectreattack.com/">Spectre
      and Meltdown bugs</a>, which are hardware vulnerabilities that
    were (or still are) present in many popular modern processors.
    Exploitation of these vulnerabilities would allow a program to steal
    data which that program should not be allowed to access (e.g., from
    the OS or another program running on the same machine). <br>
    <br>
    Both attacks involve the use of <a moz-do-not-send="true"
      href="https://en.wikipedia.org/wiki/Side-channel_attack"><b>side
        channels</b></a>. Spectre observes side effects of <a
      moz-do-not-send="true"
      href="https://en.wikipedia.org/wiki/Speculative_execution">speculative

      execution</a>, a common means of hiding memory latency and so
    speeding up execution in modern microprocessors. Meltdown
    specifically targets memory isolation hardware. The challenge is
    that many features that aim to optimize performance in the common
    case can be exploited to reveal information by systematically
    tilting the scales to the rare case. While mitigations to both
    processors and operating systems have now been deployed, this <a
      moz-do-not-send="true"
      href="https://dl.acm.org/doi/abs/10.1145/3373376.3378453">vector
      of attack (side channels in hardware) is, unfortunately, not
      likely to go away soon</a>. <br>
  </body>
</html>
